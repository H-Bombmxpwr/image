<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Image Lab — Help & Reference</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="icon" href="{{ url_for('static', filename='images/icon.png') }}" type="image/png">
  <style>
    .help-container { max-width: 1000px; margin: 0 auto; padding: 24px; }
    .help-header { margin-bottom: 32px; }
    .help-header h1 { font-size: 2rem; margin-bottom: 8px; background: linear-gradient(135deg, var(--accent) 0%, #a78bfa 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .help-section { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 24px; margin-bottom: 24px; }
    .help-section h2 { font-size: 1.25rem; margin-bottom: 16px; display: flex; align-items: center; gap: 10px; }
    .help-section h2 .icon { width: 24px; height: 24px; color: var(--accent); }
    .help-section h3 { font-size: 1rem; margin: 20px 0 12px; color: var(--text-secondary); }
    .help-section p { color: var(--text-secondary); line-height: 1.7; margin-bottom: 12px; }
    .help-section ul { color: var(--text-secondary); padding-left: 20px; margin-bottom: 16px; }
    .help-section li { margin-bottom: 8px; line-height: 1.6; }
    .kbd { font-family: var(--font-mono); font-size: 0.875rem; background: var(--bg-tertiary); padding: 2px 8px; border-radius: 6px; border: 1px solid var(--border); }
    .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin-top: 16px; }
    .feature-card { background: var(--bg-tertiary); border-radius: 12px; padding: 16px; }
    .feature-card h4 { font-size: 0.9375rem; margin-bottom: 8px; }
    .feature-card p { font-size: 0.875rem; margin-bottom: 0; }
    .equation { background: var(--bg-tertiary); border-radius: 8px; padding: 12px 16px; margin: 12px 0; font-family: var(--font-mono); overflow-x: auto; }
    .shortcut-table { width: 100%; border-collapse: collapse; margin-top: 12px; }
    .shortcut-table th, .shortcut-table td { padding: 10px 12px; text-align: left; border-bottom: 1px solid var(--border-subtle); }
    .shortcut-table th { color: var(--text-muted); font-weight: 500; font-size: 0.75rem; text-transform: uppercase; }
    .shortcut-table td { color: var(--text-secondary); }
    .shortcut-table td:first-child { font-family: var(--font-mono); color: var(--accent); }
    .tip { background: rgba(99, 102, 241, 0.1); border-left: 3px solid var(--accent); padding: 12px 16px; border-radius: 0 8px 8px 0; margin: 16px 0; }
    .tip strong { color: var(--accent); }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <a href="{{ url_for('index') }}" class="brand-name" style="text-decoration:none">← Image Lab</a>
    </div>
    <div class="actions">
      <a href="{{ url_for('about_page') }}" class="btn btn-ghost">About</a>
    </div>
  </header>

  <main class="help-container">
    <div class="help-header">
      <h1>Help & Reference</h1>
      <p class="muted">Complete guide to all Image Lab features</p>
    </div>

    <section class="help-section">
      <h2><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg> Getting Started</h2>
      <p>Image Lab is a powerful browser-based image editor. Here's how to get started:</p>
      <div class="feature-grid">
        <div class="feature-card"><h4>1. Open an Image</h4><p>Click "Open", drag & drop, or paste with <span class="kbd">Ctrl+V</span>.</p></div>
        <div class="feature-card"><h4>2. Edit Your Image</h4><p>Use tabs to access Basic, Adjust, Filters, and Advanced tools.</p></div>
        <div class="feature-card"><h4>3. Export</h4><p>Choose format and quality, then Download or Copy to clipboard.</p></div>
        <div class="feature-card"><h4>4. History</h4><p>Every change is tracked. Restore any previous state anytime.</p></div>
      </div>
      <div class="tip"><strong>Tip:</strong> Your work is automatically saved in your browser!</div>
    </section>

    <section class="help-section">
      <h2><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg> Supported Formats</h2>
      <table class="shortcut-table">
        <thead><tr><th>Format</th><th>Import</th><th>Export</th><th>Notes</th></tr></thead>
        <tbody>
          <tr><td>PNG</td><td>✓</td><td>✓</td><td>Lossless, supports transparency</td></tr>
          <tr><td>JPEG</td><td>✓</td><td>✓</td><td>Lossy compression, no transparency</td></tr>
          <tr><td>WebP</td><td>✓</td><td>✓</td><td>Modern format, good compression</td></tr>
          <tr><td>GIF</td><td>✓</td><td>✓</td><td>Animated support with special tools</td></tr>
          <tr><td>BMP</td><td>✓</td><td>✓</td><td>Uncompressed bitmap</td></tr>
          <tr><td>TIFF</td><td>✓</td><td>✓</td><td>High quality, larger files</td></tr>
        </tbody>
      </table>
    </section>

    <section class="help-section">
      <h2><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/><path d="M9 21V9"/></svg> Basic Tools</h2>
      <h3>Crop</h3><p>Interactive cropping with drag handles. Click Apply when done.</p>
      <h3>Flip</h3><p>Mirror horizontally (H) or vertically (V).</p>
      <h3>Rotate</h3><p>Quick ±90° buttons or custom angle input.</p>
      <h3>Resize</h3><p>Change dimensions with various interpolation methods:</p>
      <ul>
        <li><strong>Lanczos:</strong> Highest quality, best for photos</li>
        <li><strong>Bicubic:</strong> Good quality, smooth gradients</li>
        <li><strong>Bilinear:</strong> Fast, decent quality</li>
        <li><strong>Nearest:</strong> Preserves hard edges (pixel art)</li>
      </ul>
    </section>

    <section class="help-section">
      <h2><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v10"/></svg> Adjust Tools</h2>
      <h3>Brightness</h3><p>Multiply pixel values. 100% = no change.</p>
      <div class="equation">I' = factor × I</div>
      <h3>Contrast</h3><p>Adjust difference between light and dark areas.</p>
      <div class="equation">I' = factor × (I - 128) + 128</div>
      <h3>Saturation</h3><p>Color intensity. 0% = grayscale.</p>
      <h3>Gamma</h3><p>Non-linear brightness. &lt;1 brightens, &gt;1 darkens midtones.</p>
      <div class="equation">I' = 255 × (I/255)^(1/γ)</div>
      <h3>Temperature</h3><p>Warm (positive) or cool (negative) color shift.</p>
      <h3>Auto Enhance</h3><p>Automatic contrast optimization.</p>
    </section>

    <section class="help-section">
      <h2><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg> Filters</h2>
      <div class="feature-grid">
        <div class="feature-card"><h4>Grayscale</h4><p>Convert to black and white.</p></div>
        <div class="feature-card"><h4>Sepia</h4><p>Warm vintage tones.</p></div>
        <div class="feature-card"><h4>Invert</h4><p>Create a negative image.</p></div>
        <div class="feature-card"><h4>Sharpen</h4><p>Enhance edges and details.</p></div>
        <div class="feature-card"><h4>Edges</h4><p>Sobel edge detection.</p></div>
        <div class="feature-card"><h4>Emboss</h4><p>3D relief effect.</p></div>
        <div class="feature-card"><h4>Gaussian Blur</h4><p>Smooth blur with radius control.</p></div>
        <div class="feature-card"><h4>Median</h4><p>Noise reduction, preserves edges.</p></div>
        <div class="feature-card"><h4>Posterize</h4><p>Reduce color depth.</p></div>
        <div class="feature-card"><h4>Pixelate</h4><p>Blocky pixel effect.</p></div>
      </div>
    </section>

    <section class="help-section">
      <h2><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20V10"/><path d="M18 20V4"/><path d="M6 20v-4"/></svg> Advanced Tools</h2>
      <h3>Histogram Equalization</h3><p>Spread intensities for better contrast.</p>
      <h3>Background Removal (Simple)</h3><p>Remove solid backgrounds by color tolerance.</p>
      {% if has_rembg %}<h3>AI Background Removal</h3><p>Deep learning for precise subject isolation.</p>{% endif %}
      <h3>Vignette</h3><p>Darken corners for focus effect.</p>
      <h3>Border</h3><p>Add solid color border.</p>
      <h3>Watermark</h3><p>Add text overlay with position and opacity controls.</p>
      {% if has_seam %}<h3>Seam Carving</h3><p>Content-aware resize that preserves important features.</p>{% endif %}
    </section>

    <section class="help-section">
      <h2><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="2.18"/><path d="M7 2v20"/><path d="M17 2v20"/></svg> GIF Tools</h2>
      <ul>
        <li><strong>Resize GIF:</strong> Scale while preserving frames and timing</li>
        <li><strong>Trim Frames:</strong> Remove frames from start/end</li>
        <li><strong>Speed:</strong> Adjust playback speed (0.5x to 4x)</li>
        <li><strong>Reverse:</strong> Play backwards</li>
      </ul>
    </section>

    <section class="help-section">
      <h2><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M7 16h10"/></svg> Shortcuts</h2>
      <table class="shortcut-table">
        <thead><tr><th>Shortcut</th><th>Action</th></tr></thead>
        <tbody>
          <tr><td>Ctrl+V</td><td>Paste image from clipboard</td></tr>
          <tr><td>Drop file</td><td>Open dropped image</td></tr>
          <tr><td>Click canvas</td><td>Open file picker</td></tr>
        </tbody>
      </table>
    </section>

    <section class="help-section">
      <h2><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg> Technical Info</h2>
      <p><strong>Backend:</strong> Python/Flask with Pillow</p>
      <p><strong>Seam Carving:</strong> {{ seam_backend }}</p>
      {% if has_rembg %}<p><strong>AI Background:</strong> rembg with U²-Net</p>{% endif %}
      <div class="tip"><strong>Privacy:</strong> Images are processed in memory only and not stored on our servers.</div>
    </section>
  </main>
</body>
</html>
